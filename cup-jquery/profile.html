<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>User Profile</title>

  <!-- CSS dependencies -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/sweetalert2/11.16.1/sweetalert2.css">
  <link rel="stylesheet" href="css/profile.css" />

  <!-- JS dependencies -->
  <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/sweetalert2/11.16.1/sweetalert2.min.js"></script>

  <!-- Your JS logic -->
   <script src="js/config.js"></script>
  <script src="js/user.js"></script>
</head>
<body>
  <!-- Header placeholder -->
  <div id="profile"></div>

  <div class="container mt-4">
    <h2>User Profile</h2>

    <form id="profileForm" enctype="multipart/form-data">
      <div class="form-group">
        <label for="avatar">Profile Picture</label>
        <input type="file" class="form-control-file" id="avatar" name="image" accept="image/*" />
        <img id="avatarPreview" src="#" alt="Avatar Preview" class="mt-2" width="150" style="display:none;" />
      </div>

      <div class="form-group">
        <label for="name">Full Name</label>
        <input type="text" class="form-control" id="name" name="name" />
      </div>

      <div class="form-group">
        <label for="address">Address</label>
        <input type="text" class="form-control" id="address" name="address" />
      </div>

      <div class="form-group">
        <label for="phone">Phone</label>
        <input type="text" class="form-control" id="phone" name="phone" />
      </div>

      <button type="submit" id="updateBtn" class="btn btn-primary">Update Profile</button>
    </form>
  </div>
</body>

<script>
  function getToken() {
    const userId = JSON.parse(sessionStorage.getItem('userId'));
    if (!userId) {
  Swal.fire({
    icon: 'warning',
    title: 'Access Denied',
    text: 'You must be logged in to access this page.',
    confirmButtonText: 'Go to Login',
    allowOutsideClick: false,
    allowEscapeKey: false,
    backdrop: true,
  }).then(() => {
    window.location.href = 'login.html';
  });
  return null;
}

    return userId;
  }

  // Call it once the page loads
  $(document).ready(function () {
    getToken(); // Redirects if not logged in
    $('#header').load('header.html');  
  });
</script>

</html>
